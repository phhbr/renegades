[build]
  command = "yarn run build"
  publish = "dist/demo/browser"
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "20"

# Prerender Extension - aktiviere die Edge Function
[[edge_functions]]
  path = "/*"
  function = "nf-prerender-ext_prerender-middleware"

# Prerender Function Konfiguration
[functions."nf-prerender-ext_prerender"]
  external_node_modules = ["cheerio", "puppeteer-core"]

# Optional: Cache Control
[[headers]]
  for = "/*"
  [headers.values]
    Cache-Control = "public, max-age=3600"
    X-Robots-Tag = "index, follow"

# Optional: Security Headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "SAMEORIGIN"
    X-Content-Type-Options = "nosniff"
    X-XSS-Protection = "1; mode=block"
